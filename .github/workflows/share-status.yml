on:
   workflow_run:
     workflows: ["Package testing"]
     types: [completed] #requested

jobs:
  on-success:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    steps:
      - run: |
          curl "https://blynk.cloud/external/api/update?token=$BLYNK_AUTH_TOKEN&v2=0"
          curl "https://blynk.cloud/external/api/update?token=$BLYNK_AUTH_TOKEN&v3=255"
          curl "https://blynk.cloud/external/api/update?token=$BLYNK_AUTH_TOKEN&v4=0"
          curl "https://blynk.cloud/external/api/update?token=$BLYNK_AUTH_TOKEN&v15=128"

  on-failure:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'failure' }}
    steps:
      - run: 
          curl "https://blynk.cloud/external/api/update?token=$BLYNK_AUTH_TOKEN&v2=255"
          curl "https://blynk.cloud/external/api/update?token=$BLYNK_AUTH_TOKEN&v3=0"
          curl "https://blynk.cloud/external/api/update?token=$BLYNK_AUTH_TOKEN&v4=0"
          curl "https://blynk.cloud/external/api/update?token=$BLYNK_AUTH_TOKEN&v15=128"
